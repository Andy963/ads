# Advanced / full configuration reference for ADS.
# Most users should start from `.env.example` and only set what they actually need.
#
# Claude/Gemini are auto-detected from local config by default:
# - Claude: ~/.claude/config.json / auth.json / settings.json
# - Gemini: ~/.gemini/config.json / auth.json / .env(.local) / .ven(.local)
# Env vars below are optional overrides or advanced knobs.

# ----------------------------
# Codex
# ----------------------------
# CODEX_HOME=~/.codex

# ----------------------------
# Claude (supporting agent)
# ----------------------------
# 默认：检测到凭证即自动启用；一般不需要设置开关。
# ENABLE_CLAUDE_AGENT=0  # 强制禁用（即使已配置凭证）
# ENABLE_CLAUDE_AGENT=1  # 强制启用（仍需要凭证）
# CLAUDE_API_KEY=
# ANTHROPIC_API_KEY=
# CLAUDE_MODEL=claude-sonnet-4.5
# CLAUDE_BASE_URL=
# CLAUDE_API_BASE=
# ANTHROPIC_BASE_URL=
# CLAUDE_WORKDIR=
# CLAUDE_TOOL_ALLOWLIST=*  # comma-separated; '*' means allow all
# ADS_CLAUDE_STREAMING=1
# ADS_CLAUDE_STREAM_THROTTLE_MS=200

# ----------------------------
# Gemini (supporting agent)
# ----------------------------
# 默认：检测到凭证即自动启用；一般不需要设置开关。
# ENABLE_GEMINI_AGENT=0  # 强制禁用（即使已配置凭证）
# ENABLE_GEMINI_AGENT=1  # 强制启用（仍需要凭证）
# GEMINI_API_KEY=
# GOOGLE_API_KEY=
# GEMINI_MODEL=gemini-2.0-flash
# GEMINI_BASE_URL=
# GEMINI_API_VERSION=v1beta
# GEMINI_ACCESS_TOKEN=
# GOOGLE_GENAI_USE_VERTEXAI=true
# GOOGLE_CLOUD_PROJECT=
# GOOGLE_CLOUD_LOCATION=us-central1
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/credentials.json
# GEMINI_GOOGLE_APPLICATION_CREDENTIALS=/path/to/credentials.json
# ADS_GEMINI_STREAMING=1
# ADS_GEMINI_STREAM_THROTTLE_MS=120
# GEMINI_MIN_REQUEST_INTERVAL_MS=250
# GEMINI_MAX_RPM=60
# GEMINI_MAX_ATTEMPTS=3
# GEMINI_MAX_RETRY_WAIT_MS=60000
# GEMINI_MAX_TOOL_PASSES=6

# ----------------------------
# Local tool controls (non-Codex agents)
# ----------------------------
# 默认都启用；只在你想限制时再设置为 0。
# ENABLE_AGENT_EXEC_TOOL=0
# ENABLE_AGENT_FILE_TOOLS=0
# ENABLE_AGENT_APPLY_PATCH=0
# AGENT_EXEC_TOOL_ALLOWLIST=*  # comma-separated; '*' means no restriction
# ADS_AGENT_MAX_TOOL_ROUNDS=0  # 0 = unlimited tool rounds
# AGENT_FILE_TOOL_MAX_BYTES=204800
# AGENT_FILE_TOOL_MAX_WRITE_BYTES=1048576
# AGENT_APPLY_PATCH_MAX_BYTES=524288

# ----------------------------
# Tavily search (external web search)
# If unset, `/search` will fall back to local docs search.
# ----------------------------
# TAVILY_API_KEY=
# TAVILY_API_KEYS=key1,key2

# ----------------------------
# Telegram Bot (required only if you run ads-telegram)
# ----------------------------
# TELEGRAM_BOT_TOKEN=
# TELEGRAM_ALLOWED_USERS=123456789
# TELEGRAM_SILENT_NOTIFICATIONS=1
# TELEGRAM_MAX_RPM=10
# TELEGRAM_SESSION_TIMEOUT=0
# TELEGRAM_STREAM_UPDATE_INTERVAL=1500
# TELEGRAM_MODEL=
# TELEGRAM_PROXY_URL=
# SANDBOX_MODE=workspace-write  # read-only | workspace-write | danger-full-access

# Directory whitelist shared by Web/Telegram/CLI (comma-separated absolute paths)
# ALLOWED_DIRS=/absolute/path1,/absolute/path2

# ----------------------------
# Web Console
# ----------------------------
# ADS_WEB_HOST=0.0.0.0
# ADS_WEB_PORT=8787
# ADS_WEB_TOKEN=change-me  # set empty to disable auth (local dev only)
# ADS_WEB_MAX_CLIENTS=1
# ADS_WEB_WS_PING_INTERVAL_MS=15000
# ADS_WEB_WS_MAX_MISSED_PONGS=3
# ADS_WEB_IDLE_MINUTES=0

# ----------------------------
# Workspace-scoped history recall + local /search (advanced)
# ----------------------------
# ADS_WORKSPACE_HISTORY_LOOKBACK_TURNS=100
# ADS_WORKSPACE_HISTORY_MAX_CHARS=2000
# ADS_WORKSPACE_HISTORY_SEARCH_ENGINE=fts5 # or window-scan
# ADS_WORKSPACE_HISTORY_SEARCH_SCAN_LIMIT=5000
# ADS_WORKSPACE_HISTORY_SEARCH_MAX_RESULTS=15
# ADS_WORKSPACE_HISTORY_CLASSIFY=1

# ----------------------------
# Vector search (semantic recall; optional)
# ----------------------------
# ADS_VECTOR_SEARCH_ENABLED=1
# ADS_VECTOR_SEARCH_URL=http://localhost:8788
# ADS_VECTOR_SEARCH_TOKEN=change-me
# ADS_VECTOR_SEARCH_TOPK=8
# ADS_VECTOR_SEARCH_MAX_TOPK=50
# ADS_VECTOR_SEARCH_MAX_QUERY_CHARS=8000
# ADS_VECTOR_SEARCH_TIMEOUT_MS=15000
# ADS_VECTOR_SEARCH_UPSERT_BATCH_SIZE=64
# ADS_VECTOR_SEARCH_HISTORY_SCAN_LIMIT=800
# ADS_VECTOR_SEARCH_NAMESPACES=cli,web,telegram
# ADS_VECTOR_SEARCH_CHUNK_MAX_CHARS=1600
# ADS_VECTOR_SEARCH_CHUNK_OVERLAP_CHARS=200
#
# Auto context injection (gated vector retrieval)
# ADS_VECTOR_SEARCH_AUTO_CONTEXT_ENABLED=1
# ADS_VECTOR_SEARCH_AUTO_CONTEXT_MODE=intent # intent | always
# ADS_VECTOR_SEARCH_AUTO_CONTEXT_TOPK=6
# ADS_VECTOR_SEARCH_AUTO_CONTEXT_MAX_CHARS=6000
# ADS_VECTOR_SEARCH_AUTO_CONTEXT_MIN_SCORE=0.62
# ADS_VECTOR_SEARCH_AUTO_CONTEXT_MIN_INTERVAL_MS=0
# ADS_VECTOR_SEARCH_AUTO_CONTEXT_MIN_QUERY_CHARS=40
# ADS_VECTOR_SEARCH_AUTO_CONTEXT_ALLOW_BARE_TRIGGERS=1
# ADS_VECTOR_SEARCH_AUTO_CONTEXT_TRIGGER_KEYWORDS=continue,previous,recap
# ADS_VECTOR_SEARCH_AUTO_CONTEXT_INTENT_KEYWORDS=repo,codebase,api,sqlite,error

# ----------------------------
# Logging (optional)
# ----------------------------
# ADS_DEBUG=1
# ADS_LOG_FILE=
# ADS_LOG_DIR=
# ADS_LOG_STDOUT=0

# ----------------------------
# System prompt reinjection (optional)
# ----------------------------
# ADS_REINJECTION_ENABLED=1
# ADS_REINJECTION_TURNS=6
# ADS_RULES_REINJECTION_TURNS=1
# CLI_REINJECTION_ENABLED=1
# CLI_REINJECTION_TURNS=6
# CLI_RULES_REINJECTION_TURNS=1
